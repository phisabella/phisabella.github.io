---
layout: article
title: basic conceptions--AD from 0 to 0.9
mathjax: true
key: a00004	
cover: /bkgs/1.png
modify_date: 2021-10-3
show_author_profile: true
tag: 
- DC
- Pentest
mode: immersive
header:
  theme: dark
article_header:
  type: overlay
  theme: dark
  background_color: '#203028'
  background_image:
    gradient: 'linear-gradient(135deg, rgba(34, 139, 87 , .4), rgba(139, 34, 139, .4))'
    src: /docs/assets/images/cover3.jpg
---

## 前言

上次被推荐了这篇文章，说是一篇文章讲完了内网，零零散散看了可能有快一个月，总算是看完了一遍。确实学到了很多有关内网的内容，不过文章比较侧重底层和基础一些，还有大量的链接，不容易和实践的记忆联系在一起。上面写的很多内容在自己打靶机或者真实渗透的时候完全感觉不到，但实践的时候看到一些理论相关的又能豁然开朗，可能这就是枯燥的理论学习的意义吧，希望自己的学习不要浮于表层，局限于工具的使用。

这篇是AD from 0 to 0.9系列笔记的第一部分，主要是有关域，森林，域信任，用户，组的概念和基础，原文：

https://zer1t0.gitlab.io/posts/attacking_ad/#why-this-post

（英语原文笔记写着爽但再看的时候完全不想看，因此这个系列完了会把Academy的笔记尽量翻译一次，以后应该也会尽量少做英文的笔记，实在是提不起复习的兴趣）



## 什么是AD

Active Directory是一个系统，它允许管理从中央服务器连接到同一网络中的一组计算机和用户

Active Directory通过维护一个集中化的数据库来管理，其中包含有关用户、计算机、策略等

**装了AD的服务器就是DC**

## **Domains**

首先，我们称之为Active Directory网络的是通常称为域的网络

域是一组连接的计算机，它们共享Active Directory数据库，该数据库由域的中央服务器管理，这些服务器称为**域控制器(DC)**。

### **Domain name**

每个域都有一个 DNS 名称

除了**其** **DNS** **名称**外，每个域名还可以与 NetBIOS 名称进行标识

**SID**（安全标识符）也可以识别域

```
PS C:\Users\Anakin> Get-ADDomain | select DNSRoot,NetBIOSName,DomainSID
DNSRoot         NetBIOSName        DomainSID
-------         -----------        ---------
contoso.local    CONTOSO           S-1-5-21-1372086773-2238746523-2939299801

确认用户域和计算机域
$env:USERDNSDOMAIN
(Get-ADDomain).DNSRoot
(Get-WmiObject Win32_ComputerSystem).Domain
```

## **Forests**

使用 DNS 名称非常有用，因为它允许为管理目的创建子域

```
              contoso.local
                    |
            .-------'--------.
            |                |
            |                |
     it.contoso.local hr.contoso.local
            | 
            |
            |
  webs.it.contoso.local
```